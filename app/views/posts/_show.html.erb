<div class="modal">
  <div class="modal-background">
  </div>

  <div class="modal-card">
    <header class="card-header" id="modal-header">
      <div class="modal-left">
        <h5 class="subtitle is-5">
          <%= link_to "#{post.user.nickname}", mylist_user_path(post.user),id: "modal-user" %>
        </h5>
        <% if user_signed_in? && current_user.id == post.user.id %>
          <%= link_to edit_post_path(post.id), method: :get do %>
            <span class="icon" id="modal-icon">
              <i class="far fa-edit"></i>
            </span>
          <% end %>
          <%= link_to post_path(post.id), method: :delete, data: {confirm: "削除しますか？"} do %>
            <span class="icon" id="modal-icon">
              <i class="fas fa-trash"></i>
            </span>
          <% end %>
        <% end %>
      </div>
      <div class="modal-right">
        <button class="delete is-large" id="modal-del" aria-label="close"></button>
      </div>
    </header>
    <section class="modal-card-body">
      <h3 class="modal-card-title subtitle is-3" id="modal-line">
        <%= post.title %>
      </h3>
  
      <% if post.img.present? %>
        <%= image_tag post.img.url, id: "modal-line" %>
      <% else %>
        <%= image_tag "https://bulma.io/images/placeholders/1280x960.png",  id: "modal-body" %>
      <% end %>
      <div class='field' id="modal-body">
        <p><%= simple_format(post.body) %></p>
      </div>

      <div class='field' id="modal-line">
        <h6 class="title is-6">【オススメの焼き鳥】</h6>
        <% @post.categories.each do |category| %>
          <p><%= category.name %></p>
        <% end %>
      </div>

      <div class='field' id="modal-line">
        <h6 class="title is-6">【店舗情報】</h6>
        <p><%= post.restaurant.name %></p> 
        <%= button_to "店舗詳細", "#{post.restaurant.url}", class: "button"%>
      </div>

      <div class="modal-comment">
        <% if user_signed_in? %>
          <%= form_for [@post, @comment] do |f| %>
            <div class="field">
              <div class="control">
                <textarea class= "textarea" id="dummy-area" placeholder="コメントを入力してください"></textarea>
                <div class="comment-error"></div>
                <div class="button is-warning" id="dummy-button">コメントする</div>
                <%= f.text_field :comment, id: "comment-area" %>
                <%= f.submit class: "button is-warning", id: "comment-button" %>
              </div>
            </div>
          <% end %>
        <% end %>
        <div class="comment-index">
          <h6 class="title is-6">【コメント一覧】</h6>
            <% if @comments %>
              <% @comments.each do |comment| %>
                <p>
                  <strong><%= link_to comment.user.nickname, mylist_user_path(comment.user) %>：</strong>
                  <%= comment.comment %>
                </p>
              <% end %>
            <% end %>
        </div>
      </div>
    </section>
  </div>
</div>